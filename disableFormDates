<!-- Flatpickr CSS/JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<script>
(function () {
  const FIELD_ID = "date-0c6b958e-5803-40d5-afb9-b046ad6d3d3e-field"; // your input
  const MIN_DATE = "2025-10-18"; // earliest allowed
  const ALT_FORMAT = "m/d/Y";     // what users see
  const SUBMIT_FORMAT = "Y-m-d";  // what gets submitted

  function initPicker() {
    const input = document.getElementById(FIELD_ID);
    if (!input || input.dataset._fpApplied === "1") return;

    // Ensure we don't trigger iOS native picker
    input.setAttribute("type", "text");

    flatpickr(input, {
      disableMobile: true,       // force Flatpickr on iOS/Android
      minDate: MIN_DATE,         // days before this are grayed out & unselectable
      dateFormat: SUBMIT_FORMAT, // hidden/actual value submitted
      altInput: true,            // show a nicer, human-readable date
      altFormat: ALT_FORMAT,     // MM/DD/YYYY in UI
      defaultDate: MIN_DATE,     // preselect earliest allowed
      allowInput: false,
    });

    input.dataset._fpApplied = "1";
  }

  function start() {
    initPicker();
    // Re-apply if Squarespace re-renders the block
    new MutationObserver(initPicker).observe(document.body, { childList: true, subtree: true });
  }

  if (document.readyState === "complete") start();
  else window.addEventListener("load", start);
})();
</script>
